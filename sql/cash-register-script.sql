-- MySQL Script generated by MySQL Workbench
-- Fri May 14 20:08:16 2021
-- Model: New Model    Version: 1.0
-- MySQL Workbench Forward Engineering

SET @OLD_UNIQUE_CHECKS=@@UNIQUE_CHECKS, UNIQUE_CHECKS=0;
SET @OLD_FOREIGN_KEY_CHECKS=@@FOREIGN_KEY_CHECKS, FOREIGN_KEY_CHECKS=0;
SET @OLD_SQL_MODE=@@SQL_MODE, SQL_MODE='ONLY_FULL_GROUP_BY,STRICT_TRANS_TABLES,NO_ZERO_IN_DATE,NO_ZERO_DATE,ERROR_FOR_DIVISION_BY_ZERO,NO_ENGINE_SUBSTITUTION';

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------

-- -----------------------------------------------------
-- Schema mydb
-- -----------------------------------------------------
CREATE SCHEMA IF NOT EXISTS `mydb` DEFAULT CHARACTER SET utf8 ;
USE `mydb` ;

-- -----------------------------------------------------
-- Table `mydb`.`GRUPO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`GRUPO` (
  `NUMERO` INT NOT NULL,
  `NOMBRE` VARCHAR(32) NULL,
  `BD_REPORTE_Z` TINYINT(1) NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DEPARTAMENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DEPARTAMENTO` (
  `NUMERO` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(32) NULL,
  `PRECIO_FIJO` DECIMAL(10,4) NULL,
  `LIMITE_PRECIO` DECIMAL(10,4) NULL,
  `BD_POLARIDAD` TINYINT(1) NULL,
  `BD_PRECIO_CERO` TINYINT(1) NULL,
  `BD_REPORTE_Z` TINYINT(1) NULL,
  `BD_IMPRESORA_1` TINYINT(1) NULL,
  `BD_IMPRESORA_2` TINYINT(1) NULL,
  `BD_CUPONES` TINYINT(1) NULL,
  `BD_DEPTO_ABIERTO` TINYINT(1) NULL,
  `GRUPO_NUMERO` INT NOT NULL,
  PRIMARY KEY (`NUMERO`),
  INDEX `fk_DEPARTAMENTO_GRUPO1_idx` (`GRUPO_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_DEPARTAMENTO_GRUPO1`
    FOREIGN KEY (`GRUPO_NUMERO`)
    REFERENCES `mydb`.`GRUPO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PLU`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PLU` (
  `NUMERO` VARCHAR(16) NOT NULL,
  `DEPARTAMENTO_NUMERO` INT NOT NULL,
  `NOMBRE` VARCHAR(32) NOT NULL,
  `PRECIO` DECIMAL(10,4) NOT NULL,
  `ALERTA_EXISTENCIA` DECIMAL(10,4) NULL,
  `DISPONIBLE` DECIMAL(10,4) NULL,
  `CANT_POR_PRECIO` DECIMAL(10,4) NULL,
  `BD_CUPONES` TINYINT(1) NULL COMMENT '	',
  `BD_DESCUENTO` TINYINT(1) NULL,
  `BD_DEPTO_ABIERTO` TINYINT(1) NULL,
  `BD_AJUSTADO` TINYINT(1) NULL,
  PRIMARY KEY (`NUMERO`),
  INDEX `fk_Plu_Departamentos_idx` (`DEPARTAMENTO_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_Plu_Departamentos`
    FOREIGN KEY (`DEPARTAMENTO_NUMERO`)
    REFERENCES `mydb`.`DEPARTAMENTO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`IMPUESTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`IMPUESTO` (
  `NUMERO` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(32) NULL,
  `TASA` DOUBLE NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PLU_BD_IMPUESTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PLU_BD_IMPUESTO` (
  `PLU_NUMERO` VARCHAR(16) NOT NULL,
  `IMPUESTO_NUMERO` INT NOT NULL,
  `BD_IMPUESTOS` TINYINT(1) NULL,
  PRIMARY KEY (`PLU_NUMERO`, `IMPUESTO_NUMERO`),
  INDEX `fk_PLU_BD_IMPUESTOS_IMPUESTO1_idx` (`IMPUESTO_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_PLU_BD_IMPUESTOS_PLU1`
    FOREIGN KEY (`PLU_NUMERO`)
    REFERENCES `mydb`.`PLU` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PLU_BD_IMPUESTOS_IMPUESTO1`
    FOREIGN KEY (`IMPUESTO_NUMERO`)
    REFERENCES `mydb`.`IMPUESTO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`NIVEL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`NIVEL` (
  `NUMERO` SMALLINT NOT NULL,
  `NOMBRE` VARCHAR(18) NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`PLU_HISTORICO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`PLU_HISTORICO` (
  `PLU_NUMERO` VARCHAR(16) NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `CANTIDAD_REGULAR` DECIMAL(10,4) NULL,
  `CANTIDAD_DESCUENTO` DECIMAL(10,4) NULL,
  `IMPORTE_REGULAR` DECIMAL(10,4) NULL,
  `IMPORTE_DESCUENTO` DECIMAL(10,4) NULL,
  `BD_REPORTE_Z` TINYINT(1) NULL,
  PRIMARY KEY (`PLU_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_PLU_HISTORICO_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_PLU_HISTORICO_PLU1`
    FOREIGN KEY (`PLU_NUMERO`)
    REFERENCES `mydb`.`PLU` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_PLU_HISTORICO_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`TIENDA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`TIENDA` (
  `NUMERO` INT NOT NULL,
  `NOMBRE` VARCHAR(32) NULL,
  `PAGOS_EFECTIVO` SMALLINT NULL,
  `ALERTA_MINIMO` DECIMAL(10,4) NULL,
  `ALERTA_MAXIMO` DECIMAL(10,4) NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CAJA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CAJA` (
  `TIENDA_NUMERO` INT NOT NULL,
  `NUMERO` INT NOT NULL,
  `CONTADOR_X` BIGINT NULL,
  `GRAN_TOTAL_1` DECIMAL(10,4) NULL,
  `GRAN_TOTAL_2` DECIMAL(10,4) NULL,
  `CONTADOR_Z_1` BIGINT NULL,
  `CONTADOR_Z_2` BIGINT NULL,
  `BD_REPORTE_Z` TINYINT(1) NULL,
  PRIMARY KEY (`TIENDA_NUMERO`, `NUMERO`),
  INDEX `fk_CAJA_TIENDA1_idx` (`TIENDA_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_CAJA_TIENDA1`
    FOREIGN KEY (`TIENDA_NUMERO`)
    REFERENCES `mydb`.`TIENDA` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`MOVIMIENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`MOVIMIENTO` (
  `CAJA_TIENDA_NUMERO` INT NOT NULL,
  `CAJA_NUMERO` INT NOT NULL,
  `NUMERO` BIGINT NOT NULL,
  `MODO_OPERACION` INT NULL,
  `CANTIDAD_ACTUAL` DECIMAL(10,4) NULL,
  `CANTIDAD_ARTICULOS` BIGINT NULL,
  `IMPORTE_ACTUAL` DECIMAL(10,4) NULL,
  `IMPORTE_PAGO_PARCIAL` DECIMAL(10,4) NULL,
  `IMPORTE_CAMBIO_IMPUESTO` DECIMAL(10,4) NULL,
  `IMPORTE_DESCUENTOS` DECIMAL(10,4) NULL,
  `IMPORTE_DEVOLUCIONES` DECIMAL(10,4) NULL,
  `IMPORTE_ANULACIONES` DECIMAL(10,4) NULL,
  `PRECIO_ACTUAL` DECIMAL(10,4) NULL,
  `SUBTOTAL_CUPONES` DECIMAL(10,4) NULL,
  `SUBTOTAL_EXENTO` DECIMAL(10,4) NULL,
  `SUBTOTAL_GRAVABLE` DECIMAL(10,4) NULL,
  `SUBTOTAL_CALCULADO` DECIMAL(10,4) NULL,
  `SALDO_PREVIO` DECIMAL(10,4) NULL,
  `ULTIMO_CAMBIO_IMPUESTO` INT NULL,
  `ULTIMA_CANTIDAD` DECIMAL(10,4) NULL,
  `ULTIMO_IMPORTE` DECIMAL(10,4) NULL,
  `ULTIMO_PRECIO_MANUAL` DECIMAL(10,4) NULL,
  `ULTIMO_IMPORTE_DESCUENTO` DECIMAL(10,4) NULL,
  `CAMBIO_DEPARTAMENTO` INT NULL,
  `CAMBIO_TECLA_PLU` INT NULL,
  `GAVETA_EFECTIVO` SMALLINT NULL,
  `BD_MODO_OPERACION` TINYINT(1) NULL,
  `BD_ULTIMO_PRECIO_MANUAL` TINYINT(1) NULL,
  `BD_ULTIMO_CON_DESCUENTO` VARCHAR(18) NULL,
  `BD_SUSPENDIDO` TINYINT(1) NULL,
  `BD_SUBTOTAL_VALIDO` TINYINT(1) NULL,
  `BD_FIN_MOVIMIENTO` TINYINT(1) NULL,
  `BD_DESCUENTO` TINYINT(1) NULL,
  `BD_PRECIO_MANUAL` TINYINT(1) NULL,
  `BD_PAGO_PARCIAL_VALIDO` TINYINT(1) NULL,
  `` TINYINT(1) NULL,
  `BD_MODIFICANDO_CUENTA` TINYINT(1) NULL,
  PRIMARY KEY (`CAJA_TIENDA_NUMERO`, `CAJA_NUMERO`, `NUMERO`),
  INDEX `fk_MOVIMIENTO_CAJA1_idx` (`CAJA_TIENDA_NUMERO` ASC, `CAJA_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_MOVIMIENTO_CAJA1`
    FOREIGN KEY (`CAJA_TIENDA_NUMERO` , `CAJA_NUMERO`)
    REFERENCES `mydb`.`CAJA` (`TIENDA_NUMERO` , `NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`COMISION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`COMISION` (
  `NUMERO` INT NOT NULL,
  `NOMBRE` VARCHAR(32) NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DEP_BD_COMISION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DEP_BD_COMISION` (
  `DEPARTAMENTO_NUMERO` INT NOT NULL,
  `COMISION_NUMERO` INT NOT NULL,
  `BD_COMISION` TINYINT(1) NULL,
  PRIMARY KEY (`DEPARTAMENTO_NUMERO`, `COMISION_NUMERO`),
  INDEX `fk_DEP_BD_COMISION_COMISION1_idx` (`COMISION_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_DEP_BD_COMISION_DEPARTAMENTO1`
    FOREIGN KEY (`DEPARTAMENTO_NUMERO`)
    REFERENCES `mydb`.`DEPARTAMENTO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DEP_BD_COMISION_COMISION1`
    FOREIGN KEY (`COMISION_NUMERO`)
    REFERENCES `mydb`.`COMISION` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OPERADOR`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OPERADOR` (
  `NUMERO` BIGINT NOT NULL,
  `CLAVE` VARCHAR(8) NULL,
  `NOMBRE` VARCHAR(32) NULL,
  `GAVETA` SMALLINT NULL,
  `BD_SUPERVISOR` TINYINT(1) NULL,
  `BD_RELOJ_CHECADOR` TINYINT(1) NULL,
  `BD_REPORTE_Z` TINYINT(1) NULL,
  `BD_EFECTUAR_Z` TINYINT(1) NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OPR_COMISION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OPR_COMISION` (
  `OPERADOR_NUMERO` BIGINT NOT NULL,
  `COMISION_NUMERO` INT NOT NULL,
  `TASA` DECIMAL(10,4) NULL,
  PRIMARY KEY (`OPERADOR_NUMERO`, `COMISION_NUMERO`),
  INDEX `fk_OPR_COMISION_COMISION1_idx` (`COMISION_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_OPR_COMISION_OPERADOR1`
    FOREIGN KEY (`OPERADOR_NUMERO`)
    REFERENCES `mydb`.`OPERADOR` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_COMISION_COMISION1`
    FOREIGN KEY (`COMISION_NUMERO`)
    REFERENCES `mydb`.`COMISION` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DEP_BD_IMPUESTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DEP_BD_IMPUESTO` (
  `DEPARTAMENTO_NUMERO` INT NOT NULL,
  `IMPUESTO_NUMERO` INT NOT NULL,
  `BD_IMPUESTOS` TINYINT(1) NULL,
  PRIMARY KEY (`DEPARTAMENTO_NUMERO`, `IMPUESTO_NUMERO`),
  INDEX `fk_DEP_BD_IMPUESTO_IMPUESTO1_idx` (`IMPUESTO_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_DEP_BD_IMPUESTO_DEPARTAMENTO1`
    FOREIGN KEY (`DEPARTAMENTO_NUMERO`)
    REFERENCES `mydb`.`DEPARTAMENTO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DEP_BD_IMPUESTO_IMPUESTO1`
    FOREIGN KEY (`IMPUESTO_NUMERO`)
    REFERENCES `mydb`.`IMPUESTO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OPR_TOT_COMISION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OPR_TOT_COMISION` (
  `OPERADOR_NUMERO` BIGINT NOT NULL,
  `COMISION_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `IMPORTES` DECIMAL(10,4) NULL,
  `CONTADORES` BIGINT NULL,
  PRIMARY KEY (`OPERADOR_NUMERO`, `COMISION_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_OPR_TOT_COMISION_COMISION1_idx` (`COMISION_NUMERO` ASC) VISIBLE,
  INDEX `fk_OPR_TOT_COMISION_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_OPR_TOT_COMISION_OPERADOR1`
    FOREIGN KEY (`OPERADOR_NUMERO`)
    REFERENCES `mydb`.`OPERADOR` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_TOT_COMISION_COMISION1`
    FOREIGN KEY (`COMISION_NUMERO`)
    REFERENCES `mydb`.`COMISION` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_TOT_COMISION_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CJA_TOT_IMPUESTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CJA_TOT_IMPUESTO` (
  `CAJA_TIENDA_NUMERO` INT NOT NULL,
  `CAJA_NUMERO` INT NOT NULL,
  `IMPUESTO_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `IMPORTES` DECIMAL(10,4) NULL,
  `SUBTOTALES` DECIMAL(10,4) NULL,
  `EXENTOS` DECIMAL(10,4) NULL,
  `CUPONES_GRAVABLE` DECIMAL(10,4) NULL,
  `CUPONES_EXENTO` DECIMAL(10,4) NULL,
  PRIMARY KEY (`CAJA_TIENDA_NUMERO`, `CAJA_NUMERO`, `IMPUESTO_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_CJA_TOT_IMPUESTO_IMPUESTO1_idx` (`IMPUESTO_NUMERO` ASC) VISIBLE,
  INDEX `fk_CJA_TOT_IMPUESTO_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_CJA_TOT_IMPUESTO_CAJA1`
    FOREIGN KEY (`CAJA_TIENDA_NUMERO` , `CAJA_NUMERO`)
    REFERENCES `mydb`.`CAJA` (`TIENDA_NUMERO` , `NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_IMPUESTO_IMPUESTO1`
    FOREIGN KEY (`IMPUESTO_NUMERO`)
    REFERENCES `mydb`.`IMPUESTO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_IMPUESTO_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`GPO_HISTORICO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`GPO_HISTORICO` (
  `GRUPO_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `CANTIDAD` DECIMAL(10,4) NULL,
  `IMPORTE` DECIMAL(10,4) NULL,
  PRIMARY KEY (`GRUPO_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_GPO_HISTORICO_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_GPO_HISTORICO_GRUPO1`
    FOREIGN KEY (`GRUPO_NUMERO`)
    REFERENCES `mydb`.`GRUPO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_GPO_HISTORICO_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DESCUENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DESCUENTO` (
  `NUMERO` INT NOT NULL,
  `NOMBRE` VARCHAR(32) NULL,
  `TASA` DECIMAL(10,4) NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CJA_TOT_DESCUENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CJA_TOT_DESCUENTO` (
  `CAJA_TIENDA_NUMERO` INT NOT NULL,
  `CAJA_NUMERO` INT NOT NULL,
  `DESCUENTO_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `IMPORTES` DECIMAL(10,4) NULL,
  `CONTADORES` BIGINT NULL,
  PRIMARY KEY (`CAJA_TIENDA_NUMERO`, `CAJA_NUMERO`, `DESCUENTO_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_CJA_TOT_DESCUENTO_DESCUENTO1_idx` (`DESCUENTO_NUMERO` ASC) VISIBLE,
  INDEX `fk_CJA_TOT_DESCUENTO_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_CJA_TOT_DESCUENTO_CAJA1`
    FOREIGN KEY (`CAJA_TIENDA_NUMERO` , `CAJA_NUMERO`)
    REFERENCES `mydb`.`CAJA` (`TIENDA_NUMERO` , `NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_DESCUENTO_DESCUENTO1`
    FOREIGN KEY (`DESCUENTO_NUMERO`)
    REFERENCES `mydb`.`DESCUENTO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_DESCUENTO_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OPR_TOT_DESCUENTO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OPR_TOT_DESCUENTO` (
  `OPERADOR_NUMERO` BIGINT NOT NULL,
  `DESCUENTO_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `IMPORTES` DECIMAL(10,4) NULL,
  `CONTADORES` BIGINT NULL,
  PRIMARY KEY (`OPERADOR_NUMERO`, `DESCUENTO_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_OPR_TOT_DESCUENTO_DESCUENTO1_idx` (`DESCUENTO_NUMERO` ASC) VISIBLE,
  INDEX `fk_OPR_TOT_DESCUENTO_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_OPR_TOT_DESCUENTO_OPERADOR1`
    FOREIGN KEY (`OPERADOR_NUMERO`)
    REFERENCES `mydb`.`OPERADOR` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_TOT_DESCUENTO_DESCUENTO1`
    FOREIGN KEY (`DESCUENTO_NUMERO`)
    REFERENCES `mydb`.`DESCUENTO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_TOT_DESCUENTO_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`FORMAS_PAGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`FORMAS_PAGO` (
  `NUMERO` INT NOT NULL,
  `NOMBRE` VARCHAR(32) NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CJA_TOT_PAGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CJA_TOT_PAGO` (
  `CAJA_TIENDA_NUMERO` INT NOT NULL,
  `CAJA_NUMERO` INT NOT NULL,
  `FORMAS_PAGO_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `IMPORTES` DECIMAL(10,4) NULL,
  `IMPORTES_NETOS` DECIMAL(10,4) NULL,
  `CONTADORES` BIGINT NULL,
  PRIMARY KEY (`CAJA_TIENDA_NUMERO`, `CAJA_NUMERO`, `FORMAS_PAGO_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_CJA_TOT_PAGO_FORMAS_PAGO1_idx` (`FORMAS_PAGO_NUMERO` ASC) VISIBLE,
  INDEX `fk_CJA_TOT_PAGO_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_CJA_TOT_PAGO_CAJA1`
    FOREIGN KEY (`CAJA_TIENDA_NUMERO` , `CAJA_NUMERO`)
    REFERENCES `mydb`.`CAJA` (`TIENDA_NUMERO` , `NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_PAGO_FORMAS_PAGO1`
    FOREIGN KEY (`FORMAS_PAGO_NUMERO`)
    REFERENCES `mydb`.`FORMAS_PAGO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_PAGO_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CJA_TOT_HORA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CJA_TOT_HORA` (
  `CAJA_TIENDA_NUMERO` INT NOT NULL,
  `CAJA_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `HORA` SMALLINT NOT NULL,
  `IMPORTES` DECIMAL(10,4) NULL,
  `CONTADORES` BIGINT NULL,
  PRIMARY KEY (`CAJA_TIENDA_NUMERO`, `CAJA_NUMERO`, `NIVEL_NUMERO`, `HORA`),
  INDEX `fk_CJA_TOT_HORA_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_CJA_TOT_HORA_CAJA1`
    FOREIGN KEY (`CAJA_TIENDA_NUMERO` , `CAJA_NUMERO`)
    REFERENCES `mydb`.`CAJA` (`TIENDA_NUMERO` , `NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_HORA_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CJA_TOT_NIVEL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CJA_TOT_NIVEL` (
  `CAJA_TIENDA_NUMERO` INT NOT NULL,
  `CAJA_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `PERSONAS` BIGINT NULL,
  `EFECTIVO_GAVETA_1` DECIMAL(10,4) NULL,
  `EFECTIVO_GAVETA_2` DECIMAL(10,4) NULL,
  `SIN_VENTAS` BIGINT NULL,
  PRIMARY KEY (`CAJA_TIENDA_NUMERO`, `CAJA_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_CJA_TOT_NIVEL_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_CJA_TOT_NIVEL_CAJA1`
    FOREIGN KEY (`CAJA_TIENDA_NUMERO` , `CAJA_NUMERO`)
    REFERENCES `mydb`.`CAJA` (`TIENDA_NUMERO` , `NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_NIVEL_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`BD_TIPO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`BD_TIPO` (
  `NUMERO` INT NOT NULL,
  `NOMBRE` VARCHAR(32) NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`BANDERA`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`BANDERA` (
  `CAJA_TIENDA_NUMERO` INT NOT NULL,
  `CAJA_NUMERO` INT NOT NULL,
  `BD_TIPO_NUMERO` INT NOT NULL,
  `NUMERO` INT NOT NULL AUTO_INCREMENT,
  `NOMBRE` VARCHAR(132) NULL,
  `ACTIVA` TINYINT(1) NULL,
  PRIMARY KEY (`NUMERO`, `CAJA_TIENDA_NUMERO`, `CAJA_NUMERO`, `BD_TIPO_NUMERO`),
  INDEX `fk_BANDERA_BD_TIPO1_idx` (`BD_TIPO_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_BANDERA_CAJA1`
    FOREIGN KEY (`CAJA_TIENDA_NUMERO` , `CAJA_NUMERO`)
    REFERENCES `mydb`.`CAJA` (`TIENDA_NUMERO` , `NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_BANDERA_BD_TIPO1`
    FOREIGN KEY (`BD_TIPO_NUMERO`)
    REFERENCES `mydb`.`BD_TIPO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`CJA_TOT_OPERACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`CJA_TOT_OPERACION` (
  `CAJA_TIENDA_NUMERO` INT NOT NULL,
  `CAJA_NUMERO` INT NOT NULL,
  `OPERADOR_NUMERO` BIGINT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `IMPORTES` DECIMAL(10,4) NULL,
  `CONTADORES` BIGINT NULL,
  PRIMARY KEY (`CAJA_TIENDA_NUMERO`, `CAJA_NUMERO`, `OPERADOR_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_CJA_TOT_OPERACION_OPERADOR1_idx` (`OPERADOR_NUMERO` ASC) VISIBLE,
  INDEX `fk_CJA_TOT_OPERACION_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_CJA_TOT_OPERACION_CAJA1`
    FOREIGN KEY (`CAJA_TIENDA_NUMERO` , `CAJA_NUMERO`)
    REFERENCES `mydb`.`CAJA` (`TIENDA_NUMERO` , `NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_OPERACION_OPERADOR1`
    FOREIGN KEY (`OPERADOR_NUMERO`)
    REFERENCES `mydb`.`OPERADOR` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_CJA_TOT_OPERACION_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OPR_TOT_PAGO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OPR_TOT_PAGO` (
  `OPERADOR_NUMERO` BIGINT NOT NULL,
  `FORMAS_PAGO_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `IMPORTES` DECIMAL(10,4) NULL,
  `CONTADORES` BIGINT NULL,
  `IMPORTES_NETOS` DECIMAL(10,4) NULL,
  `DEPOSITOS` DECIMAL(10,4) NULL,
  `RETIROS` DECIMAL(10,4) NULL,
  PRIMARY KEY (`OPERADOR_NUMERO`, `FORMAS_PAGO_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_OPR_TOT_PAGOS_FORMAS_PAGO1_idx` (`FORMAS_PAGO_NUMERO` ASC) VISIBLE,
  INDEX `fk_OPR_TOT_PAGOS_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_OPR_TOT_PAGOS_OPERADOR1`
    FOREIGN KEY (`OPERADOR_NUMERO`)
    REFERENCES `mydb`.`OPERADOR` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_TOT_PAGOS_FORMAS_PAGO1`
    FOREIGN KEY (`FORMAS_PAGO_NUMERO`)
    REFERENCES `mydb`.`FORMAS_PAGO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_TOT_PAGOS_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OPERACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OPERACION` (
  `NUMERO` INT NOT NULL,
  `NOMBRE` VARCHAR(32) NULL,
  PRIMARY KEY (`NUMERO`))
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OPR_TOT_OPERACION`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OPR_TOT_OPERACION` (
  `OPERADOR_NUMERO` BIGINT NOT NULL,
  `OPERACION_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `IMPORTES` DECIMAL(10,4) NULL,
  `CONTADORES` BIGINT NULL,
  PRIMARY KEY (`OPERADOR_NUMERO`, `OPERACION_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_OPR_TOT_OPERACION_OPERACION1_idx` (`OPERACION_NUMERO` ASC) VISIBLE,
  INDEX `fk_OPR_TOT_OPERACION_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_OPR_TOT_OPERACION_OPERADOR1`
    FOREIGN KEY (`OPERADOR_NUMERO`)
    REFERENCES `mydb`.`OPERADOR` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_TOT_OPERACION_OPERACION1`
    FOREIGN KEY (`OPERACION_NUMERO`)
    REFERENCES `mydb`.`OPERACION` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_TOT_OPERACION_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`OPR_TOT_NIVEL`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`OPR_TOT_NIVEL` (
  `OPERADOR_NUMERO` BIGINT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `EFECTIVO_GAVETA` DECIMAL(10,4) NULL,
  `PERSONAS` BIGINT NULL,
  `SIN_VENTAS` BIGINT NULL,
  PRIMARY KEY (`OPERADOR_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_OPR_TOT_NIVEL_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_OPR_TOT_NIVEL_OPERADOR1`
    FOREIGN KEY (`OPERADOR_NUMERO`)
    REFERENCES `mydb`.`OPERADOR` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_OPR_TOT_NIVEL_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`DEP_HISTORICO`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`DEP_HISTORICO` (
  `DEPARTAMENTO_NUMERO` INT NOT NULL,
  `NIVEL_NUMERO` SMALLINT NOT NULL,
  `CANTIDAD` DECIMAL(10,4) NULL,
  `IMPORTE` DECIMAL(10,4) NULL,
  PRIMARY KEY (`DEPARTAMENTO_NUMERO`, `NIVEL_NUMERO`),
  INDEX `fk_DEP_HISTORICO_NIVEL1_idx` (`NIVEL_NUMERO` ASC) VISIBLE,
  CONSTRAINT `fk_DEP_HISTORICO_DEPARTAMENTO1`
    FOREIGN KEY (`DEPARTAMENTO_NUMERO`)
    REFERENCES `mydb`.`DEPARTAMENTO` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION,
  CONSTRAINT `fk_DEP_HISTORICO_NIVEL1`
    FOREIGN KEY (`NIVEL_NUMERO`)
    REFERENCES `mydb`.`NIVEL` (`NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


-- -----------------------------------------------------
-- Table `mydb`.`INFO_TICKET`
-- -----------------------------------------------------
CREATE TABLE IF NOT EXISTS `mydb`.`INFO_TICKET` (
  `CAJA_TIENDA_NUMERO` INT NOT NULL,
  `CAJA_NUMERO` INT NOT NULL,
  `BD_ENCABEZADO` TINYINT(1) NOT NULL,
  `POSICION` SMALLINT NOT NULL,
  `INFO_TICKET` VARCHAR(132) NULL,
  `BD_NEGRITA` TINYINT(1) NULL,
  `BD_ALTO` TINYINT(1) NULL,
  `BD_ANCHO` TINYINT(1) NULL,
  `BD_SUBRAYADO` TINYINT(1) NULL,
  PRIMARY KEY (`CAJA_TIENDA_NUMERO`, `CAJA_NUMERO`, `BD_ENCABEZADO`, `POSICION`),
  CONSTRAINT `fk_INFO_TICKET_CAJA1`
    FOREIGN KEY (`CAJA_TIENDA_NUMERO` , `CAJA_NUMERO`)
    REFERENCES `mydb`.`CAJA` (`TIENDA_NUMERO` , `NUMERO`)
    ON DELETE NO ACTION
    ON UPDATE NO ACTION)
ENGINE = InnoDB;


SET SQL_MODE=@OLD_SQL_MODE;
SET FOREIGN_KEY_CHECKS=@OLD_FOREIGN_KEY_CHECKS;
SET UNIQUE_CHECKS=@OLD_UNIQUE_CHECKS;
